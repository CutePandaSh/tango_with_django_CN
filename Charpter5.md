# 5 模型和数据库

当你想到数据库的时候，你往往会想到SQL，这是我们从数据库查询数据最常用的方法，但是在Django中，从基础数据库（存放所有数据的地方）中查询的操作，将会由 _对象关系映射（Object Relational Mapper, ORM)_ 来负责处理。从本质上来说，所有存储在数据库表中的数据都可以用 _模型 model_ 来封装。而一个 model 就是用来描述你数据库 table 中数据的一个 Python 对象。你可以通过操纵相对应的 Python model 对象，就能对数据进行操作，而不是直接使用 SQL 去操作数据库。

本章节会介绍如何使用Django和它的ORM进行数据管理的基础知识。你将会惊喜的发现在应用的基础数据库中增加、修改、删除数据是如此的简单，把数据库中的数据直接展示在用户的浏览器上是那么的便捷。

## 5.1 Rango的需求

在我们正式开始之前，先让我们回顾一下我们正在开发的Rango应用对于数据的需求。之前我们已经对整个应用的完整需求进行的细节的定义，但在这里为了帮助你回忆，我们快速汇总一下客户的需求。

- 从本质上来说，Rango应用就是一个网页目录系统——一个包含到其他网站连结的网站。

- 系统内会有很多不同的 _网页目录 web page directory_，每个目录下都有一些网页链接。**我们在第一章概述中定义** 网页目录和网页链接是一对多的关系。可以再次看一下下方的ER图。

- 一个目录需要有 名字，访问数量，以及喜欢数量。

- 一个网页链接需要关联到一个目录，并且含有 标题，访问地址和浏览数量（或点击数量）

![Rango应用两个主体的ER图](https://s1.ax1x.com/2018/05/06/CUBahF.png)

## 5.2 让Django知道你的数据库

在我们新建model之前，我们首先需要在Django中配置你的数据库。在Django 2.0中，当你新建一个项目，Django会在 `setting.py`模块中自动建立了一个`DATABASES`的变量。它看起来就如以下例子。

```python
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3',
        'NAME': os.path.join(BASE_DIR, 'db.sqlite3'),
    }
}
```
